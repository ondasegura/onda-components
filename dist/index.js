var a,e,t,s,o={59:function(a,e,t){t.d(e,{_:()=>S,U:()=>Z});var s,o,r=t(893),n=t(294),l=t(293),i=t(827),d=t(942),c=t(352),g=t(316),p=t(933),m=t(766),u=t(622),_=t(646),x=t(696),b=t(445),f=t(412),v=t(777),h=t(204),y=t(843);let j=process.env.PUBLIC_BASE_URL_BACKEND,N={modal:{conta_pagar_item:{},loading:!1},pagina:{loading:!1,conta_pagar:{}},formulario:{conta_pagar_id:"",conta_pagar:{},open:!1,loading:!1,loading_submit:!1}},w=(0,v.U)()((0,h.n)(()=>({states:N}))),S=(o=class{},(0,f._)(o,"api",class{static async criar(a){var e;await new Promise(a=>setTimeout(a,2e3));let t=await y.Z.api.servidor_backend.post(String(j),"/conta-pagar",a,!0),s=null==t?void 0:t.results;return w.setState(a=>{a.states.modal.loading=!0}),(null==s||null==(e=s.data)?void 0:e.conta_pagar)&&w.setState(a=>{a.states.pagina.conta_pagar.data.conta_pagar=y.Z.update_context.update_array_itens({oldArray:a.states.pagina.conta_pagar.data.conta_pagar,newItem:[s.data.conta_pagar]});let e=a.states.pagina.conta_pagar.data.paginacao;e.itens_por_pagina=e.itens_por_pagina+1,e.total_itens=e.total_itens+1,e.total_itens_pagina_atual=e.total_itens_pagina_atual+1}),s}static async buscar_pelo_filtro(a){var e;w.setState(a=>{a.states.pagina.loading=!0});let t=await y.Z.api.servidor_backend.get(String(j),"/contas-pagar",!0,a.filtros.conta_pagar),s=null==t?void 0:t.results;return(null==s||null==(e=s.data)?void 0:e.conta_pagar)&&w.setState(a=>{a.states.pagina.conta_pagar=s}),w.setState(a=>{a.states.pagina.loading=!1}),s}static async buscar_pelo_id(a){var e;w.setState(a=>{a.states.modal.loading=!0});let t=await y.Z.api.servidor_backend.get(String(j),`/conta-pagar/${a.data._id}`,!0,{}),s=null==t?void 0:t.results;return(null==s||null==(e=s.data)?void 0:e.conta_pagar)&&w.setState(a=>{a.states.modal.conta_pagar_item=s}),w.setState(a=>{a.states.modal.loading=!1}),s}static async atualizar_pelo_id(a){var e;w.setState(a=>{a.states.modal.loading=!0});let t=await y.Z.api.servidor_backend.patch(String(j),`/conta-pagar/${a.data.conta_pagar._id}`,{data:a.data},!0),s=null==t?void 0:t.results,o=(null==s?void 0:s.data.conta_pagar)||(null==s||null==(e=s.data)?void 0:e.conta_pagar);return o&&w.setState(a=>{var e;a.states.pagina.conta_pagar.data.conta_pagar=y.Z.update_context.update_array_itens({oldArray:a.states.pagina.conta_pagar.data.conta_pagar,newItem:[o]}),(null==(e=a.states.modal.conta_pagar_item.data.conta_pagar)?void 0:e._id)===o._id&&(a.states.modal.conta_pagar_item={data:{conta_pagar:o}})}),w.setState(a=>{a.states.pagina.loading=!1}),s}static async deletar_pelo_id(a){let e=await y.Z.api.servidor_backend.delete(String(j),`/conta-pagar/${a._id}`),t=null==e?void 0:e.results;return w.setState(e=>{e.states.pagina.conta_pagar.data.conta_pagar=y.Z.update_context.remover_item_pelo_id({oldArray:e.states.pagina.conta_pagar.data.conta_pagar,itemToRemove:a._id});let t=e.states.pagina.conta_pagar.data.paginacao;t.itens_por_pagina=t.itens_por_pagina-1,t.total_itens=t.total_itens-1,t.total_itens_pagina_atual=t.total_itens_pagina_atual-1}),t}}),(0,f._)(o,"contexto",(s=class{},(0,f._)(s,"jsx",class{static get_formulario(){return w(a=>a.states.formulario)}static get_pagina(){return w(a=>a.states.pagina)}static get_modal(){return w(a=>a.states.modal)}}),(0,f._)(s,"state",class{static reset(){w.setState(()=>({states:N}))}static set_conta_pagar_item(a){w.setState(e=>{e.states.modal.conta_pagar_item=a})}static set_conta_pagar(a){w.setState(e=>{e.states.pagina.conta_pagar=a})}static async set_open_formulario(a){if(w.setState(a=>{a.states.formulario.loading=!0,a.states.formulario.open=!0}),a)try{var e;let t=await o.api.buscar_pelo_id({data:{_id:a}});(null==t||null==(e=t.data)?void 0:e.conta_pagar)?w.setState(a=>{a.states.formulario.conta_pagar=t,a.states.formulario.loading=!1}):w.setState(a=>{a.states.formulario.loading=!1})}catch(a){w.setState(a=>{a.states.formulario.loading=!1}),console.error("Erro ao buscar conta a pagar:",a)}w.setState(a=>{a.states.formulario.loading=!1})}static set_close_formulario(){w.setState(a=>{a.states.formulario.loading=!1,a.states.formulario.open=!1})}static get_state_formulario(){return w.getState().states.formulario}static get_state_modal(){return w.getState().states.modal}static get_state_pagina(){return w.getState().states.pagina}}),s)),(0,f._)(o,"websocket",class{}),o),Z=()=>{var a,e,t,s,o,f,v,h,y,j,N,w,Z,C,k,O,P,D;let F=S.contexto.jsx.get_formulario(),{register:T,handleSubmit:z,reset:A,formState:{errors:E,isSubmitting:I}}=(0,l.cI)({resolver:(0,i.F)(b.Z.Banco.Controllers.ContaPagar.Criar.InputSchema),defaultValues:{data:{conta_pagar:{fornecedor:"",descricao:"",valor:0,data_emissao:new Date().toISOString().split("T")[0],data_vencimento:"",data_pagamento:null,status:"pendente",forma_pagamento:"boleto",categoria:"",deletado:!1,ativo:!0}}}});(0,n.useEffect)(()=>{var a,e;if((null==(e=F.conta_pagar)||null==(a=e.data)?void 0:a.conta_pagar)&&F.conta_pagar_id){let a=F.conta_pagar.data.conta_pagar;A({data:{conta_pagar:{fornecedor:a.fornecedor||"",descricao:a.descricao||"",valor:a.valor||0,data_emissao:a.data_emissao||new Date().toISOString().split("T")[0],data_vencimento:a.data_vencimento||"",data_pagamento:a.data_pagamento||null,status:a.status||"pendente",forma_pagamento:a.forma_pagamento||"boleto",categoria:a.categoria||"",deletado:a.deletado||!1,ativo:void 0===a.ativo||a.ativo}}})}else A({data:{conta_pagar:{fornecedor:"",descricao:"",valor:0,data_emissao:new Date().toISOString().split("T")[0],data_vencimento:"",data_pagamento:null,status:"pendente",forma_pagamento:"boleto",categoria:"",deletado:!1,ativo:!0}}})},[F.conta_pagar,F.conta_pagar_id,A]);let B=async a=>{try{F.conta_pagar_id?await S.api.atualizar_pelo_id({data:{conta_pagar:{...a.data.conta_pagar,_id:F.conta_pagar_id}}}):await S.api.criar({data:{conta_pagar:{...a.data.conta_pagar}}}),S.contexto.state.set_close_formulario()}catch(a){}},U=()=>{S.contexto.state.set_close_formulario()};return F.open?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity",onClick:U}),(0,r.jsx)("div",{className:"fixed right-0 top-0 h-full w-full max-w-lg bg-white shadow-xl z-50 transform transition-transform",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(d.Z,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:F.conta_pagar_id?"Editar Conta a Pagar":"Nova Conta a Pagar"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:F.conta_pagar_id?"Atualize os dados da conta":"Preencha os dados da nova conta"})]})]}),(0,r.jsx)("button",{type:"button",onClick:U,disabled:F.loading||I,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})})]}),F.loading&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-10",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-blue-600",children:[(0,r.jsx)(g.Z,{className:"h-5 w-5 animate-spin"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Carregando..."})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,r.jsxs)("form",{onSubmit:z(B),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),"Fornecedor"]}),(0,r.jsx)("input",{...T("data.conta_pagar.fornecedor"),type:"text",placeholder:"Nome do fornecedor",disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors"}),(null==(e=E.data)||null==(a=e.conta_pagar)?void 0:a.fornecedor)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.fornecedor.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4"}),"Descri\xe7\xe3o *"]}),(0,r.jsx)("textarea",{...T("data.conta_pagar.descricao"),placeholder:"Descri\xe7\xe3o da conta a pagar",rows:3,disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors"}),(null==(s=E.data)||null==(t=s.conta_pagar)?void 0:t.descricao)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.descricao.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4"}),"Valor *"]}),(0,r.jsx)("input",{...T("data.conta_pagar.valor",{valueAsNumber:!0}),type:"number",step:"0.01",min:"0",placeholder:"0,00",disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors"}),(null==(f=E.data)||null==(o=f.conta_pagar)?void 0:o.valor)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.valor.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4"}),"Data de Emiss\xe3o *"]}),(0,r.jsx)("input",{...T("data.conta_pagar.data_emissao"),type:"date",disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors"}),(null==(h=E.data)||null==(v=h.conta_pagar)?void 0:v.data_emissao)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.data_emissao.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4"}),"Data de Vencimento *"]}),(0,r.jsx)("input",{...T("data.conta_pagar.data_vencimento"),type:"date",disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors"}),(null==(j=E.data)||null==(y=j.conta_pagar)?void 0:y.data_vencimento)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.data_vencimento.message})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4"}),"Data de Pagamento"]}),(0,r.jsx)("input",{...T("data.conta_pagar.data_pagamento"),type:"date",disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors"}),(null==(w=E.data)||null==(N=w.conta_pagar)?void 0:N.data_pagamento)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.data_pagamento.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(_.Z,{className:"h-4 w-4"}),"Status"]}),(0,r.jsxs)("select",{...T("data.conta_pagar.status"),disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors",children:[(0,r.jsx)("option",{value:"pendente",children:"Pendente"}),(0,r.jsx)("option",{value:"pago",children:"Pago"}),(0,r.jsx)("option",{value:"cancelado",children:"Cancelado"})]}),(null==(C=E.data)||null==(Z=C.conta_pagar)?void 0:Z.status)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.status.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4"}),"Forma de Pagamento *"]}),(0,r.jsxs)("select",{...T("data.conta_pagar.forma_pagamento"),disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors",children:[(0,r.jsx)("option",{value:"boleto",children:"Boleto"}),(0,r.jsx)("option",{value:"transferencia",children:"Transfer\xeancia"}),(0,r.jsx)("option",{value:"dinheiro",children:"Dinheiro"}),(0,r.jsx)("option",{value:"cartao",children:"Cart\xe3o"})]}),(null==(O=E.data)||null==(k=O.conta_pagar)?void 0:k.forma_pagamento)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.forma_pagamento.message})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,r.jsx)(_.Z,{className:"h-4 w-4"}),"Categoria *"]}),(0,r.jsxs)("select",{...T("data.conta_pagar.categoria"),disabled:F.loading||I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 disabled:bg-gray-50 disabled:opacity-50 transition-colors",children:[(0,r.jsx)("option",{value:"",children:"Selecione uma categoria"}),(0,r.jsx)("option",{value:"alimentacao",children:"Alimenta\xe7\xe3o"}),(0,r.jsx)("option",{value:"transporte",children:"Transporte"}),(0,r.jsx)("option",{value:"moradia",children:"Moradia"}),(0,r.jsx)("option",{value:"saude",children:"Sa\xfade"}),(0,r.jsx)("option",{value:"educacao",children:"Educa\xe7\xe3o"}),(0,r.jsx)("option",{value:"lazer",children:"Lazer"}),(0,r.jsx)("option",{value:"outros",children:"Outros"})]}),(null==(D=E.data)||null==(P=D.conta_pagar)?void 0:P.categoria)&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.data.conta_pagar.categoria.message})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,r.jsx)("button",{type:"button",onClick:U,disabled:F.loading||I,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",onClick:z(B),disabled:F.loading||I,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 animate-spin"}),"Salvando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{className:"h-4 w-4"}),"Salvar"]})})]})]})})]}):null}}},r={};function n(a){var e=r[a];if(void 0!==e)return e.exports;var t=r[a]={exports:{}};return o[a](t,t.exports,n),t.exports}n.m=o,n.d=(a,e)=>{for(var t in e)n.o(e,t)&&!n.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})},n.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e),n.r=a=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a=[],n.O=(e,t,s,o)=>{if(t){o=o||0;for(var r=a.length;r>0&&a[r-1][2]>o;r--)a[r]=a[r-1];a[r]=[t,s,o];return}for(var l=1/0,r=0;r<a.length;r++){for(var[t,s,o]=a[r],i=!0,d=0;d<t.length;d++)(!1&o||l>=o)&&Object.keys(n.O).every(a=>n.O[a](t[d]))?t.splice(d--,1):(i=!1,o<l&&(l=o));if(i){a.splice(r--,1);var c=s();void 0!==c&&(e=c)}}return e},e={980:0},n.O.j=a=>0===e[a],t=(a,t)=>{var s,o,[r,l,i]=t,d=0;if(r.some(a=>0!==e[a])){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(i)var c=i(n)}for(a&&a(t);d<r.length;d++)o=r[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},(s=self.webpackChunkonda_components=self.webpackChunkonda_components||[]).forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s));var l=n.O(void 0,["72","186"],function(){return n(59)}),i=(l=n.O(l)).U,d=l._;export{i as FormularioFinanceiroContaPagar,d as controller_conta_pagar};